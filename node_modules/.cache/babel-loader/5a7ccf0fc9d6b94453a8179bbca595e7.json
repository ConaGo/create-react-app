{"ast":null,"code":"import _objectSpread from \"/home/lj/Git/myproject/AOT/aot_ha1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/lj/Git/myproject/AOT/aot_ha1/src/Graphs/try2.js\";\nimport React, { Component } from 'react';\nimport { ForceGraph2D } from 'react-force-graph';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem, FormGroup, Label, Input } from 'reactstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nconst WIND = 'WIND';\nconst TIDAL = 'TIDAL';\nconst SOLAR = 'SOLAR';\nconst SATURATED = 'SATURATED';\nconst OVER_SATURATED = 'OVER_SATURATED';\nconst UNDER_SATURATED = 'UNDER_SATURATED';\nexport default class Try extends Component {\n  constructor(props) {\n    super(props); // Don't call this.setState() here!\n\n    this.handlePlantChange = changeEvent => {\n      this.setState({\n        selectedPlant: changeEvent.target.value\n      });\n    };\n\n    this.state = {\n      dropdownOpen: false,\n      dropdownOpen2: false,\n      idCounter: 5,\n      source: {},\n      drain: {},\n      startValue: 0,\n      selectedPlant: 'wind',\n      wind: 50,\n      tidal: 50,\n      solar: 50,\n      cities: [{\n        id: 1,\n        currentSaturation: 0,\n        totalDemand: 250,\n        name: 'Berlin'\n      }, {\n        id: 2,\n        currentSaturation: 0,\n        totalDemand: 250,\n        name: 'Tokyo'\n      }],\n      plants: [{\n        id: 3,\n        production: 0,\n        multiplier: 1,\n        type: WIND,\n        connections: [1],\n        previousDecisions: [SATURATED, OVER_SATURATED, SATURATED, OVER_SATURATED, UNDER_SATURATED]\n      }, {\n        id: 4,\n        production: 0,\n        multiplier: 1,\n        type: TIDAL,\n        connections: [1, 2],\n        previousDecisions: [SATURATED, OVER_SATURATED, SATURATED, OVER_SATURATED, SATURATED]\n      }],\n      data: {\n        nodes: [{\n          'id': 'id1',\n          'name': 'name1',\n          'val': 1,\n          isCity: false,\n          color: 'red'\n        }, {\n          'id': 'id2',\n          'name': 'name2',\n          'val': 0.5,\n          isCity: true\n        }],\n        links: [{\n          source: 'id1',\n          target: 'id2'\n        }]\n      }\n    };\n    this.handleAddNode = this.handleAddNode.bind(this);\n    this.handleAddEdge = this.handleAddEdge.bind(this);\n    this.toggleDropDown = this.toggleDropDown.bind(this);\n    this.toggleDropDown2 = this.toggleDropDown2.bind(this);\n    this.handleSetSource = this.handleSetSource.bind(this);\n    this.handlePlantChange = this.handlePlantChange.bind(this);\n    this.handleStartValueChange = this.handleStartValueChange.bind(this);\n    this.handleTidalValueChange = this.handleTidalValueChange.bind(this);\n    this.handleSolarValueChange = this.handleSolarValueChange.bind(this);\n    this.handleWindValueChange = this.handleWindValueChange.bind(this);\n    this.handleTurn = this.handleTurn.bind(this);\n    this.formatData = this.formatData.bind(this);\n  }\n\n  componentWillMount() {//this.formatData()\n  }\n\n  handleAddNode(isCity) {\n    console.log(isCity, this.state.drain.isCity + 'isCitydrain');\n    var type;\n\n    if (isCity) {\n      type = 'black';\n    } else {\n      switch (this.state.selectedPlant) {\n        case 'wind':\n          type = WIND;\n          break;\n\n        case 'tidal':\n          type = TIDAL;\n          break;\n\n        case 'solar':\n          type = SOLAR;\n          break;\n\n        default:\n      }\n    }\n\n    let id = this.state.idCounter;\n\n    if (isCity && Object.keys(this.state.source).length) {\n      this.setState(prevState => ({\n        cities: [...prevState.cities, {\n          id: id,\n          currentSaturation: 0,\n          name: 'City' + id,\n          totalDemand: this.state.startValue * 3\n        }],\n        idCounter: prevState.idCounter + 1\n      }));\n    } else if (!isCity && Object.keys(this.state.drain).length) {\n      this.setState(prevState => ({\n        plants: [...prevState.plants, {\n          id: id,\n          multiplier: 1,\n          name: 'PowerPLant' + id,\n          type: type,\n          previousDecisions: [SATURATED, OVER_SATURATED, SATURATED, OVER_SATURATED, UNDER_SATURATED],\n          connections: [this.state.drain.id]\n        }],\n        idCounter: prevState.idCounter + 1\n      }));\n    }\n\n    this.formatData();\n    console.log(this.state.data.links);\n  }\n\n  handleAddEdge() {\n    if (Object.keys(this.state.source).length && Object.keys(this.state.drain).length) {\n      const source = this.state.source;\n      const drain = this.state.drain;\n      let plants = this.state.plants.filter(e => e.id !== source.id);\n      let plant = this.state.plants.filter(e => e.id === source.id);\n      plant = _objectSpread({}, plant, {\n        connections: [...plant.connections, drain.id]\n      });\n      plants.push(plant); // console.log(plant)\n      // console.log(plants)\n\n      console.log(plants);\n      this.setState({\n        plants: plants\n      });\n    } // this.setState(prevState=>{\n    //     //plants[source.id].connections[drain.id]:0\n    //     }\n    // })\n\n  }\n\n  handleSetSource(source) {\n    console.log(source);\n    this.setState({\n      source: source\n    });\n  }\n\n  handleSetDrain(drain) {\n    console.log(drain);\n    this.setState({\n      drain: drain\n    });\n  }\n\n  toggleDropDown() {\n    this.setState(prevState => ({\n      dropdownOpen: !prevState.dropdownOpen\n    }));\n  }\n\n  toggleDropDown2() {\n    this.setState(prevState => ({\n      dropdownOpen2: !prevState.dropdownOpen2\n    }));\n  }\n\n  handleStartValueChange(event) {\n    this.setState({\n      startValue: event.target.value\n    });\n  }\n\n  handleTidalValueChange(event) {\n    this.setState({\n      tidal: event.target.value\n    });\n  }\n\n  handleSolarValueChange(event) {\n    this.setState({\n      solar: event.target.value\n    });\n  }\n\n  handleWindValueChange(event) {\n    this.setState({\n      wind: event.target.value\n    });\n  }\n\n  handleTurn() {\n    let nodes = this.state.data.nodes; // const cities = nodes.filter(e => e.isCity)\n    // console.log(cities)\n\n    const powerPlants = nodes.filter(e => !e.isCity);\n    const links = this.state.data.links;\n    let cities = this.state.cities;\n    let plants = this.state.plants;\n    console.log(cities); // recalculate base values\n\n    const wind = this.state.wind + this.getRandomInt(40);\n    const tidal = this.state.wind + this.getRandomInt(20);\n    const solar = this.state.wind + this.getRandomInt(30);\n    let areAllPlantsEmpty = false;\n    let areAllCitiesSaturated = false;\n\n    for (let p in this.state.plants) {\n      console.log(p);\n    } // while(!areAllPlantsEmpty || !areAllCitiesSaturated){\n    //     for(let p in this.state.plants){\n    //     }\n    // }\n    //  areAllPlantsEmpty = false => plants.filter(p.energyLeft).length === 0\n    //  areAllCitiesSaturated = false => cities.filter(!c.isSaturated).length === 0\n    //  iterate over plants as areAllPlantsEmpty || areAllCitiesSaturated\n    //      calculate plant_energy (floored value)\n    //      iterate over connections\n    //          if saturationRatio < 1 then move '10' plant_energy to city\n    //          else city.isSaturated = true\n    //      if plant_energy <= 0 then plant.energyLeft = false\n    //  iterate over plants\n    //      calculate sub-net saturation\n    //      plant.previousDecisions is\n    //      if saturationRation < 1 then UNDER_SATURATED\n    //      if saturationRation === 1 then SATURATED\n    //      if saturationRation > 1 then OVER_SATURATED\n    //\n    //  === decision making ===\n    //  iterate over plants\n    //      if previousDecisions.filter(v === UNDER_SATURATED).length > 0 then increase plant.multiplier by 0.1\n    //      else if previousDecisions.filter(v === OVER_SATURATED).length === 5 then decrease plant.multiplier by 0.1\n    //\n\n\n    this.formatData();\n  }\n\n  getRandomInt(range) {\n    return Math.floor(Math.random() * range) - range / 2;\n  }\n\n  formatData() {\n    let nodes = [];\n    let links = [];\n    this.state.cities.map(e => {\n      nodes.push({\n        id: e.id,\n        name: e.name,\n        val: e.totalDemand / 50,\n        isCity: true,\n        color: 'black'\n      });\n    });\n    let color;\n    this.state.plants.map(e => {\n      switch (e.type) {\n        case WIND:\n          color = 'grey';\n          break;\n\n        case TIDAL:\n          color = 'blue';\n          break;\n\n        default:\n          color = 'yellow';\n      }\n\n      e.connections.map(e => {\n        links.push({\n          source: e.id,\n          target: e\n        });\n      });\n      nodes.push({\n        name: 'Plant' + e.id,\n        id: e.id,\n        val: e.multiplier * 5,\n        isCity: false,\n        color: color\n      });\n    });\n    this.setState({\n      data: {\n        nodes: nodes,\n        links: links\n      }\n    });\n    console.log(nodes);\n    console.log(links);\n    console.log(this.state); // setTimeout(function(){\n    //     console.log(nodes)//do what you need here\n    //     console.log(links)\n    // }, 1);\n  }\n\n  render() {\n    const data = this.state.data;\n    const sourceName = this.state.source.name;\n    const drainName = this.state.drain.name;\n    const startValue = this.state.startValue;\n    const tidalValue = this.state.tidalValue;\n    const solarValue = this.state.solarValue;\n    const windValue = this.state.windValue;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \"hallo\"), React.createElement(Button, {\n      onClick: () => this.handleAddNode(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, \"add a City\"), React.createElement(Button, {\n      onClick: () => this.handleAddNode(false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, \"add a Power Plant\"), React.createElement(Button, {\n      onClick: () => this.handleTurn(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, \"One Turn\"), React.createElement(Button, {\n      onClick: () => this.handleAddEdge(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, \"Add Connection\"), React.createElement(Dropdown, {\n      isOpen: this.state.dropdownOpen,\n      toggle: this.toggleDropDown,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, React.createElement(DropdownToggle, {\n      caret: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, \"Connection Drain\"), drainName), React.createElement(DropdownMenu, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, this.state.data.nodes.filter(item => item.isCity).map((item, i) => React.createElement(DropdownItem, {\n      key: i,\n      onClick: () => this.handleSetDrain(item, i),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }, item.name)))), React.createElement(Dropdown, {\n      isOpen: this.state.dropdownOpen2,\n      toggle: this.toggleDropDown2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }, React.createElement(DropdownToggle, {\n      caret: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, \"Connection Source\"), sourceName), React.createElement(DropdownMenu, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }, this.state.data.nodes.filter(item => !item.isCity).map((item, i) => React.createElement(DropdownItem, {\n      key: i,\n      onClick: () => this.handleSetSource(item, i),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }, item.name)))), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, \"Starting Value: \", startValue), React.createElement(\"input\", {\n      type: \"range\",\n      max: \"100\",\n      step: \"1\",\n      value: this.state.startValue,\n      onChange: this.handleStartValueChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, \"Wave Value: \", tidalValue), React.createElement(\"input\", {\n      type: \"range\",\n      max: \"100\",\n      step: \"1\",\n      value: this.state.tidal,\n      onChange: this.handleTidalValueChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, \"Solar Value: \", solarValue), React.createElement(\"input\", {\n      type: \"range\",\n      max: \"100\",\n      step: \"1\",\n      value: this.state.solar,\n      onChange: this.handleSolarValueChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, \"Wind Value: \", windValue), React.createElement(\"input\", {\n      type: \"range\",\n      max: \"100\",\n      step: \"1\",\n      value: this.state.wind,\n      onChange: this.handleWindValueChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      tag: \"fieldset\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      check: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }, React.createElement(Label, {\n      check: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"radio\",\n      name: \"radio1\",\n      value: 'tidal',\n      checked: this.state.selectedPlant === 'tidal',\n      onChange: this.handlePlantChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }), ' ', \"Tidal\")), React.createElement(FormGroup, {\n      check: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }, React.createElement(Label, {\n      check: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"radio\",\n      name: \"radio1\",\n      value: 'solar',\n      checked: this.state.selectedPlant === 'solar',\n      onChange: this.handlePlantChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410\n      },\n      __self: this\n    }), ' ', \"Solar\")), React.createElement(FormGroup, {\n      check: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418\n      },\n      __self: this\n    }, React.createElement(Label, {\n      check: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"radio\",\n      name: \"radio1\",\n      value: 'wind',\n      checked: this.state.selectedPlant === 'wind',\n      onChange: this.handlePlantChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420\n      },\n      __self: this\n    }), ' ', \"Wind\")))), React.createElement(ForceGraph2D, {\n      graphData: data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/lj/Git/myproject/AOT/aot_ha1/src/Graphs/try2.js"],"names":["React","Component","ForceGraph2D","Button","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","FormGroup","Label","Input","WIND","TIDAL","SOLAR","SATURATED","OVER_SATURATED","UNDER_SATURATED","Try","constructor","props","handlePlantChange","changeEvent","setState","selectedPlant","target","value","state","dropdownOpen","dropdownOpen2","idCounter","source","drain","startValue","wind","tidal","solar","cities","id","currentSaturation","totalDemand","name","plants","production","multiplier","type","connections","previousDecisions","data","nodes","isCity","color","links","handleAddNode","bind","handleAddEdge","toggleDropDown","toggleDropDown2","handleSetSource","handleStartValueChange","handleTidalValueChange","handleSolarValueChange","handleWindValueChange","handleTurn","formatData","componentWillMount","console","log","Object","keys","length","prevState","filter","e","plant","push","handleSetDrain","event","powerPlants","getRandomInt","areAllPlantsEmpty","areAllCitiesSaturated","p","range","Math","floor","random","map","val","render","sourceName","drainName","tidalValue","solarValue","windValue","item","i","display","flexDirection"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {ForceGraph2D} from 'react-force-graph'\nimport {Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem, FormGroup, Label, Input} from 'reactstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nconst WIND = 'WIND'\nconst TIDAL = 'TIDAL'\nconst SOLAR = 'SOLAR'\n\nconst SATURATED = 'SATURATED'\nconst OVER_SATURATED = 'OVER_SATURATED'\nconst UNDER_SATURATED = 'UNDER_SATURATED'\n\nexport default class Try extends Component {\n    constructor(props) {\n        super(props)\n        // Don't call this.setState() here!\n        this.state = {\n            dropdownOpen: false,\n            dropdownOpen2: false,\n            idCounter: 5,\n            source: {},\n            drain: {},\n            startValue: 0,\n            selectedPlant: 'wind',\n            wind: 50,\n            tidal: 50,\n            solar: 50,\n            cities: [\n                {\n                    id:1,\n                    currentSaturation: 0,\n                    totalDemand: 250,\n                    name: 'Berlin'\n                }\n                ,\n                {\n                    id:2,\n                    currentSaturation: 0,\n                    totalDemand: 250,\n                    name: 'Tokyo'\n                }\n            ],\n            plants: [{\n                    id:3,\n                    production:0,\n                    multiplier: 1,\n                    type: WIND,\n                    connections: [1],\n                    previousDecisions: [SATURATED, OVER_SATURATED, SATURATED, OVER_SATURATED, UNDER_SATURATED],\n                },{\n                    id:4,\n                    production:0,\n                    multiplier: 1,\n                    type: TIDAL,\n                    connections: [1, 2],\n                    previousDecisions: [SATURATED, OVER_SATURATED, SATURATED, OVER_SATURATED, SATURATED],\n                }\n            ],\n            data: {\n                nodes: [\n                    {\n                        'id': 'id1',\n                        'name': 'name1',\n                        'val': 1,\n                        isCity: false,\n                        color: 'red',\n                    },\n                    {\n                        'id': 'id2',\n                        'name': 'name2',\n                        'val': 0.5,\n                        isCity: true,\n                    },\n                ],\n                links: [\n                    {\n                        source: 'id1',\n                        target: 'id2'\n                    },\n                ]\n            },\n        }\n        this.handleAddNode = this.handleAddNode.bind(this)\n        this.handleAddEdge = this.handleAddEdge.bind(this)\n        this.toggleDropDown = this.toggleDropDown.bind(this)\n        this.toggleDropDown2 = this.toggleDropDown2.bind(this)\n        this.handleSetSource = this.handleSetSource.bind(this)\n        this.handlePlantChange = this.handlePlantChange.bind(this)\n        this.handleStartValueChange = this.handleStartValueChange.bind(this)\n        this.handleTidalValueChange = this.handleTidalValueChange.bind(this)\n        this.handleSolarValueChange = this.handleSolarValueChange.bind(this)\n        this.handleWindValueChange = this.handleWindValueChange.bind(this)\n        this.handleTurn = this.handleTurn.bind(this)\n        this.formatData = this.formatData.bind(this)\n    }\n    componentWillMount(){\n        //this.formatData()\n    }\n    handleAddNode(isCity) {\n        console.log(isCity,this.state.drain.isCity+'isCitydrain')\n        var type\n        if (isCity) {\n            type = 'black'\n        } else {\n            switch (this.state.selectedPlant) {\n                case 'wind':\n                    type = WIND\n                    break\n                case 'tidal':\n                    type = TIDAL\n                    break\n                case 'solar':\n                    type = SOLAR\n                    break\n                default:\n            }\n        }\n            let id = this.state.idCounter\n            if(isCity && Object.keys(this.state.source).length){\n                this.setState(prevState => ({\n                cities:[\n                    ...prevState.cities,\n                    {   \n                        id:id,\n                        currentSaturation: 0,\n                        name: 'City' + id,\n                        totalDemand: this.state.startValue * 3,\n                    }\n                ],    \n                idCounter: prevState.idCounter + 1,      \n            }))\n            }else if (!isCity && Object.keys(this.state.drain).length){\n                this.setState(prevState => ({\n                    plants:[\n                        ...prevState.plants,\n                        {   \n                            id:id,\n                            multiplier: 1,\n                            name: 'PowerPLant' + id,\n                            type: type,\n                            previousDecisions: [SATURATED, OVER_SATURATED, SATURATED, OVER_SATURATED, UNDER_SATURATED],\n                            connections:[this.state.drain.id]\n                        }\n                    ],\n                    idCounter: prevState.idCounter + 1,                 \n                }))\n            }\n       this.formatData()\n       console.log(this.state.data.links)\n    }\n    handleAddEdge() {\n        if(Object.keys(this.state.source).length && Object.keys(this.state.drain).length){\n        const source = this.state.source\n        const drain = this.state.drain\n        let plants = this.state.plants.filter(e=>e.id !== source.id)\n        let plant = this.state.plants.filter(e=>e.id === source.id)\n        plant = {...plant,connections:[...plant.connections, drain.id]}\n        plants.push(plant)\n        // console.log(plant)\n        // console.log(plants)\n        \n            console.log(plants)\n            this.setState({\n                plants:plants\n            })\n        }\n        // this.setState(prevState=>{\n        //     //plants[source.id].connections[drain.id]:0\n                \n        //     }\n        // })\n    }\n    handleSetSource(source) {\n        console.log(source)\n        this.setState({\n            source: source\n        })\n    }\n    handleSetDrain(drain) {\n        console.log(drain)\n        this.setState({\n            drain: drain\n        })\n    }\n    toggleDropDown() {\n        this.setState(prevState => ({\n            dropdownOpen: !prevState.dropdownOpen\n        }))\n    }\n    toggleDropDown2() {\n        this.setState(prevState => ({\n            dropdownOpen2: !prevState.dropdownOpen2\n        }))\n    }\n    handleStartValueChange(event) {\n        this.setState({startValue: event.target.value})\n    }\n\n    handleTidalValueChange(event) {\n        this.setState({tidal: event.target.value})\n    }\n\n    handleSolarValueChange(event) {\n        this.setState({solar: event.target.value})\n    }\n\n    handleWindValueChange(event) {\n        this.setState({wind: event.target.value})\n    }\n\n    handlePlantChange = changeEvent => {\n        this.setState({\n            selectedPlant: changeEvent.target.value\n        })\n    }\n\n    handleTurn() {\n        let nodes = this.state.data.nodes\n        // const cities = nodes.filter(e => e.isCity)\n        // console.log(cities)\n        const powerPlants = nodes.filter(e => !e.isCity)\n        const links = this.state.data.links\n\n        let cities = this.state.cities\n        let plants = this.state.plants\n        console.log(cities)\n        \n        // recalculate base values\n        const wind = this.state.wind +this.getRandomInt(40)\n        const tidal = this.state.wind +this.getRandomInt(20)\n        const solar = this.state.wind +this.getRandomInt(30)\n        let areAllPlantsEmpty = false\n        let areAllCitiesSaturated = false\n        for(let p in this.state.plants){\n            console.log(p)                \n\n\n\n\n        }\n        // while(!areAllPlantsEmpty || !areAllCitiesSaturated){\n        //     for(let p in this.state.plants){\n                            \n\n\n\n\n        //     }\n\n\n\n\n\n\n        // }\n            \n\n        //  areAllPlantsEmpty = false => plants.filter(p.energyLeft).length === 0\n        //  areAllCitiesSaturated = false => cities.filter(!c.isSaturated).length === 0\n        //  iterate over plants as areAllPlantsEmpty || areAllCitiesSaturated\n        //      calculate plant_energy (floored value)\n        //      iterate over connections\n        //          if saturationRatio < 1 then move '10' plant_energy to city\n        //          else city.isSaturated = true\n        //      if plant_energy <= 0 then plant.energyLeft = false\n\n        //  iterate over plants\n        //      calculate sub-net saturation\n        //      plant.previousDecisions is\n            //      if saturationRation < 1 then UNDER_SATURATED\n            //      if saturationRation === 1 then SATURATED\n            //      if saturationRation > 1 then OVER_SATURATED\n        //\n\n        //  === decision making ===\n        //  iterate over plants\n        //      if previousDecisions.filter(v === UNDER_SATURATED).length > 0 then increase plant.multiplier by 0.1\n        //      else if previousDecisions.filter(v === OVER_SATURATED).length === 5 then decrease plant.multiplier by 0.1\n        //\n        this.formatData()\n    }\n\n    getRandomInt(range) {\n        return Math.floor(Math.random() * (range)) - (range / 2)\n    }\n\n    formatData() {\n        let nodes = []\n        let links = []\n        this.state.cities.map(e => {\n            nodes.push({\n                id:e.id,\n                name:e.name,\n                val:e.totalDemand/50,\n                isCity:true,\n                color:'black'\n            })\n        })\n        let color\n        this.state.plants.map(e =>{\n            switch(e.type){\n                case WIND:\n                    color = 'grey'\n                    break\n                case TIDAL:\n                    color = 'blue'\n                    break;\n                default:\n                    color = 'yellow'\n            }\n            e.connections.map(e=>{\n                links.push({\n                    source:e.id,\n                    target:e\n                })\n            })\n            nodes.push({\n                name:'Plant'+e.id,\n                id:e.id,\n                val:e.multiplier*5,\n                isCity:false,\n                color:color\n            })\n        })\n        this.setState({\n            data:{\n                nodes: nodes,\n                links: links\n            }\n        })\n        console.log(nodes)\n        console.log(links)\n        console.log(this.state)\n        // setTimeout(function(){\n        //     console.log(nodes)//do what you need here\n        //     console.log(links)\n        // }, 1);\n        \n    }\n    render() {\n        const data = this.state.data\n        const sourceName = this.state.source.name\n        const drainName = this.state.drain.name\n        const startValue = this.state.startValue\n        const tidalValue = this.state.tidalValue\n        const solarValue = this.state.solarValue\n        const windValue = this.state.windValue\n\n        return (\n            <div>\n                <p>hallo</p>\n                <Button onClick={() => this.handleAddNode(true)}>add a City</Button>\n                <Button onClick={() => this.handleAddNode(false)}>add a Power Plant</Button>\n                <Button onClick={() => this.handleTurn()}>One Turn</Button>\n                <Button onClick={() => this.handleAddEdge()}>Add Connection</Button>\n                <Dropdown isOpen={this.state.dropdownOpen} toggle={this.toggleDropDown}>\n                    <DropdownToggle caret>\n                        <p>Connection Drain</p>\n                        {drainName}\n                    </DropdownToggle>\n                    <DropdownMenu>\n\n                        {this.state.data.nodes.filter((item)=>item.isCity).map((item, i) => <DropdownItem key={i}\n                                                                              onClick={() => this.handleSetDrain(item, i)}>{item.name}</DropdownItem>)}\n\n                    </DropdownMenu>\n                </Dropdown>\n                <Dropdown isOpen={this.state.dropdownOpen2} toggle={this.toggleDropDown2}>\n                    <DropdownToggle caret>\n                        <p>Connection Source</p>\n                        {sourceName}\n                    </DropdownToggle>\n                    <DropdownMenu>\n\n                        {this.state.data.nodes.filter((item)=>!item.isCity).map((item, i) => <DropdownItem key={i}\n                                                                              onClick={() => this.handleSetSource(item, i)}>{item.name}</DropdownItem>)}\n\n                    </DropdownMenu>\n                </Dropdown>\n                <div style={{display: 'flex', flexDirection: 'column'}}>\n                    <label>Starting Value: {startValue}</label>\n                    <input type=\"range\" max=\"100\" step=\"1\" value={this.state.startValue}\n                           onChange={this.handleStartValueChange}></input>\n                    <label>Wave Value: {tidalValue}</label>\n                    <input type=\"range\" max=\"100\" step=\"1\" value={this.state.tidal}\n                           onChange={this.handleTidalValueChange}></input>\n                    <label>Solar Value: {solarValue}</label>\n                    <input type=\"range\" max=\"100\" step=\"1\" value={this.state.solar}\n                           onChange={this.handleSolarValueChange}></input>\n                    <label>Wind Value: {windValue}</label>\n                    <input type=\"range\" max=\"100\" step=\"1\" value={this.state.wind}\n                           onChange={this.handleWindValueChange}></input>\n                </div>\n\n                <div>\n                    <FormGroup tag=\"fieldset\">\n                        <FormGroup check>\n                            <Label check>\n                                <Input type=\"radio\" name=\"radio1\"\n                                       value={'tidal'}\n                                       checked={this.state.selectedPlant === 'tidal'}\n                                       onChange={this.handlePlantChange}\n                                />{' '}\n                                Tidal\n                            </Label>\n                        </FormGroup>\n                        <FormGroup check>\n                            <Label check>\n                                <Input type=\"radio\" name=\"radio1\"\n                                       value={'solar'}\n                                       checked={this.state.selectedPlant === 'solar'}\n                                       onChange={this.handlePlantChange}\n                                />{' '}\n                                Solar\n                            </Label>\n                        </FormGroup>\n                        <FormGroup check>\n                            <Label check>\n                                <Input type=\"radio\" name=\"radio1\"\n                                       value={'wind'}\n                                       checked={this.state.selectedPlant === 'wind'}\n                                       onChange={this.handlePlantChange}\n                                />{' '}\n                                Wind\n                            </Label>\n                        </FormGroup>\n                    </FormGroup>\n                </div>\n                <ForceGraph2D graphData={data}></ForceGraph2D>\n\n            </div>\n\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}